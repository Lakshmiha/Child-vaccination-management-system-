{% extends "accounts/base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="card shadow">
  <div class="card-header bg-info text-white">
    <h4>Welcome, {{ request.user.username }}</h4>
  </div>
  <div class="card-body">
    {% if parent %}
      <p><strong>Email:</strong> {{ request.user.email }}</p>
      <p><strong>Phone:</strong> {{ parent.phone_number }}</p>
      <p><strong>Address:</strong> {{ parent.address }}</p>
    {% else %}
      <div class="alert alert-warning">No parent profile found. If you just registered, try logging out and in again.</div>
    {% endif %}

    <hr>
    <h5 class="mt-4">Registered Children</h5>
{% if children %}
  <ul class="list-group mb-3">
    {% for child in children %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ child.name }}</strong><br>
          <small>DOB: {{ child.date_of_birth }} | Gender: {{ child.gender }} | Blood Group: {{ child.blood_group }}</small>
        </div>
        <div>
          <a href="{% url 'accounts:edit_child' child.id %}" class="btn btn-sm btn-primary">Edit</a>
          <a href="{% url 'accounts:delete_child' child.id %}" class="btn btn-sm btn-danger">Delete</a>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-muted">No children registered yet. Add one below!</p>
{% endif %}
    <a href="{% url 'accounts:add_child' %}" class="btn btn-success">Add Child</a>
    <a href="{% url 'accounts:book_appointment'}" class="btn btn-warning">Book Appointment</a>
    <a href="#" class="btn btn-secondary">View Reminders</a>
  </div>
</div>
{% endblock %}
